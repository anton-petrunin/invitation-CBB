%%!TEX root = the-alexlemma.tex
\chapter{Definitions}\label{chap:defs}

In this lecture we give several equivalent definitions of Alexandrov space.
Alexandrov's lemma works a the main tool.

\section{Four-point comparison}\label{sec:4-point}

Recall that $\angk  pxy$ denotes the model angle at $p$; see page \pageref{page:model-angle}.

Let $p,x,y,z$ be a quadruple of points in a metric space.
If the inequality 
\[\angk  pxy_{\EE^2}+\angk pyz_{\EE^2}+\angk pzx_{\EE^2}
\le 
2\cdot\pi
\eqlbl{eq:CBB-comparison}\]
holds, then we say that the quadruple meets \index{comparison}\emph{$\EE^2$-comparison}.

If instead of $\EE^2$, we use $\SSS^2$ or $\HH^2$, then we get the definition of
$\SSS^2$- or $\HH^2$-comparisons.
Recall that $\angk  pxy_{\EE^2}$ and $\angk  pxy_{\HH^2}$ are defined if $p\ne x$, $p\ne y$,
but for $\angk  pxy_{\SSS^2}$ we require in addition that
\[\dist{p}{x}{}+\dist{p}{y}{}+\dist{x}{y}{}<2\cdot\pi;\]
if this does not hold for one of the angles, then we assume that $\SSS^2$-comparison holds for this quadruple.

More generally, one may apply this definition to $\MM^2(\kappa)$.
This way we define $\MM^2(\kappa)$-comparison for any real $\kappa$.
However, if you see $\MM^2(\kappa)$-comparison, it is safe to assume that $\kappa=-1$, $0$, or $1$
(applying rescaling, the $\MM^2(\kappa)$-comparison can be reduced to these three cases).

\begin{thm}{Definition}\label{def:CBB}
A metric space $\spc{X}$ has {}\emph{curvature $\ge\kappa$} in the sense of Alexandrov
if $\MM^2(\kappa)$-comparison
holds for any quadruple of points in $\spc{X}$.
\end{thm}

While this definition can be applied to any metric space,
we will use it mostly for geodesic space that are complete (and often compact or proper). 
If a complete geodesic space has curvature $\ge\kappa$ in the sense of Alexandrov, 
then it will be called an $\Alex\kappa$ space; here $\Alex\kappa$ is an adjective.
An $\spc{X}$ is $\Alex\kappa$ space for some $\kappa$, then it will be called
an \index{Alexandrov space}\emph{Alexandrov space}.

It is common practice in Alexandrov geometry to write proofs for nonnegative curvature and 
leave the general curvature bound as an exercise.
Sometime theses exercises are nontrivial;
in this case we add a note.
We often formulate statements of $\kappa=0$ despite that it admits a straightforward generalization to arbitrary curvature bound.


\begin{thm}{Exercise}\label{ex:Euclid-is-CBB}
Show that $\EE^n$ is $\Alex0$.
\end{thm}

\begin{thm}{Exercise}\label{ex:(3+1)-expanding}
Show that a metric space $\spc{X}$ has nonnegative curvature in the sense of Alexandrov
if and only if for any quadruple of points $p,x_1,x_2,x_3\in \spc{X}$ 
there is a quadruple of points $q,y_1,y_2,y_3\in\EE^3$
such that 
\[\dist{p}{x_i}{\spc{X}}\ge\dist{q}{y_i}{\EE^2} 
\quad \text{and}\quad
\dist{x_i}{x_j}{\spc{X}}\le\dist{y_i}{y_j}{\EE^2}\] 
for all $i$ and $j$.
\end{thm}

\section{Alexandrov's lemma}

Recall that $[xy]$ denotes a geodesic from $x$ to $y$;
set  
\index{$\left]x y\right]$, $\left[x y\right[$, $\left]x y\right[$}
\[
\left]x y\right]=[xy]\setminus\{x\},
\quad
\left[x y\right[=[xy]\setminus\{y\},
\quad
\left]x y\right[=[xy]\setminus\{x,y\}.\]

\begin{thm}{Lemma}
\index{Alexandrov's lemma}
\label{lem:alex}  
Let $p,x,y,z$ be distinct points in a metric space such that $z\in \left]x y\right[$.
Then 
the following expressions have the same sign:

\begin{subthm}{lem-alex-difference}
$\angk x p y
-\angk x p z$,
\end{subthm} 

\begin{subthm}{lem-alex-angle}
$\angk z p x
+\angk z p y -\pi$.
\end{subthm}

\begin{wrapfigure}{r}{25mm}
\vskip-6mm
\centering
\includegraphics{mppics/pic-730}
\end{wrapfigure}

The same holds for the hyperbolic and spherical model angles, 
but in the latter case, one has to assume in addition that
\[\dist{p}{z}{}+\dist{p}{y}{}+\dist{x}{y}{}< 2\cdot\pi.\]

\end{thm}

\parit{Proof.} 
Consider the model triangle $\trig{\tilde x}{\tilde p}{\tilde z}=\modtrig(x p z)$.
Take 
a point $\tilde y$ on the extension of 
$[\tilde x \tilde z]$ beyond $\tilde z$ so that $\dist{\tilde x}{\tilde y}{}=\dist{x}{y}{}$ (and therefore $\dist{\tilde x}{\tilde z}{}=\dist{x}{z}{}$). 

\begin{wrapfigure}{r}{33mm}
\vskip-8mm
\centering
\includegraphics{mppics/pic-740}
\end{wrapfigure}

Since increasing the opposite side in a plane triangle increases the corresponding angle, 
the following expressions have the same sign:
\begin{enumerate}[(i)]
\item $\mangle\hinge{\tilde x}{\tilde p}{\tilde y}-\angk{x}{p}{y}$,
\item $\dist{\tilde p}{\tilde y}{}-\dist{p}{y}{}$,
\item $\mangle\hinge{\tilde z}{\tilde p}{\tilde y}-\angk{z}{p}{y}$.
\end{enumerate}
Since 
\[\mangle\hinge{\tilde x}{\tilde p}{\tilde y}=\mangle\hinge{\tilde x}{\tilde p}{\tilde z}=\angk{x}{p}{z}\]
and
\[ \mangle\hinge{\tilde z}{\tilde p}{\tilde y}
=\pi-\mangle\hinge{\tilde z}{\tilde x}{\tilde p}
=\pi-\angk{z}{x}{p},\]
the statement follows.


The spherical and hyperbolic cases can be proved in the same way.
\qeds

\begin{thm}{Exercise}\label{ex:alex-lemma-cat}
Assume $p,x,y,z$ are as in Alexandrov's lemma.
Show that
\[\angk p x y
\ge
\angk p x z + \angk p z y,\]
with equality if and only if the expressions in \ref{SHORT.lem-alex-difference} and \ref{SHORT.lem-alex-angle} in \ref{lem:alex} vanish.
\end{thm}

Note that 
\[p\in\left]x y\right[
\quad\Longrightarrow\quad
\angk pxy=\pi.
\]
Applying it with Alexandrov's lemma and $\EE^2$-comparison, we get the following.

\begin{thm}{Claim}\label{clm:angle-mono}
If $p,x,y,z$ are points in an $\Alex0$ space.
Suppose $p\in\left]x y\right[$, then 
\[\angk xyz\le \angk xpz.\]
\end{thm}

\begin{wrapfigure}{r}{25mm}
\vskip-0mm
\centering
\includegraphics{mppics/pic-750}
\end{wrapfigure}

\begin{thm}{Exercise}\label{ex:noncreasing}
Let $\hinge p x y$ be a hinge in an $\Alex0$ space.
Consider the function
\[f\:(\dist{p}{\bar x}{},\dist{p}{\bar y}{})\mapsto \angk p{\bar x}{\bar y},\]
where $\bar x\in\left]p x\right]$ and $\bar y\in\left]p y\right]$.
Show that $f$ is nonincreasing in each argument.
\end{thm}

Note that \ref{ex:noncreasing} implies the following.

\begin{thm}{Claim}\label{clm:angle-defined}
The angle measure of any hinge in an $\Alex0$ 
space, is at least as large as the corresponding model angle;
that is,
\[\mangle\hinge p x y\ge \angk p x y\]
for any hinge $\hinge p x y$ in an $\Alex0$.

\end{thm}

\begin{thm}{Exercise}\label{ex:0-angle}
Let $\hinge p x y$ be a hinge in an $\Alex0$ space.
Suppose $\mangle\hinge p x y=0$; show that $[px]\subset [py]$ or $[py]\subset [px]$.

Conclude that geodesic in $\Alex0$ space cannot \emph{bifurcate};
that is, if two geodesics $[px]$ and $[py]$ share a nontrivial arc with an end at $p$, then $[px]\subset [py]$ or $[py]\subset [px]$.
\end{thm}

\begin{thm}{Exercise}\label{ex:pi-angle}
Let $[xy]$ be a geodesic in an $\Alex0$ space.
Suppose $z\in \left]xy\right[$ show that there is a unique geodesic $[xz]$ and $[xz]\subset [xy]$.
\end{thm}

Recall that adjacent hinges are defined in \ref{ex:adjacent-angles}.

\begin{thm}{Exercise}\label{ex:adjacent-CBB}
Let $\hinge pxz$ and $\hinge pyz$ be adjacent hinges in an $\Alex0$ 
space.
Show that
\[\mangle\hinge pxz+\mangle\hinge pyz= \pi.\]
\end{thm}


\begin{thm}{Exercise}\label{ex:pxyvw}
Let $\spc{A}$ be an $\Alex0$ 
space.
Show that  
\[
\angk xyp=\angk xvp
\quad\Longleftrightarrow\quad
\angk xyp=\angk xwp
\]
for any points
$p,x,y,v,w$ in $\spc{A}$ such that $v,w\in \left]xy\right[$.
\end{thm}

\begin{thm}{Exercise}\label{ex:angle-lim}
Let $\spc{A}$ be an $\Alex0$ space.
Suppose hinges $\hinge {x_n}{y_n}{z_n}$ in $\spc{A}$ converge to the hinge $\hinge {x_\infty}{y_\infty}{z_\infty}$;
that is, geodesics $[x_ny_n]$ and $[x_nz_n]$ converge to the geodesics $[x_\infty y_\infty]$ and $[x_\infty z_\infty]$ in the Hausdorff sense.
Show that 
\[\liminf_{n\to\infty}\mangle \hinge {x_n}{y_n}{z_n}\ge \mangle \hinge {x_\infty}{y_\infty}{z_\infty}.\]
\end{thm}

\section{Hinge comparison}

Let $\hinge pxy$ be a hinge in an $\Alex0$ space $\spc{A}$.
By \ref{ex:0-angle}, the angle measure $\mangle\hinge pxy$ is defined and
\[\mangle\hinge pxy\ge \angk pxy.\]

Further, according to \ref{ex:adjacent-CBB}, we have 
\[\mangle\hinge pxz+\mangle\hinge pyz=\pi\]
for adjacent hinges $\hinge pxz$ and $\hinge pyz$ in $\spc{A}$.

The following theorem implies that a geodesic space has nonnegative curvature in the sense of Alexandrov if
the above conditions hold for all its hinges.

\begin{thm}{Theorem}\label{thm:angle-cbb}
A complete geodesic space $\spc{A}$ is $\Alex0$ if the following conditions hold.

\begin{subthm}{angle-a}
For any hinge $\hinge x p y$ in $\spc{A}$, the angle 
$\mangle\hinge x p y$ is defined and 
\[\mangle\hinge x p y\ge\angk x p y.\]
\end{subthm}

\begin{subthm}{angle-b}
For any two adjacent hinges $\hinge pxz$ and $\hinge pyz$ in $\spc{A}$, we have
\[\mangle\hinge pxz+\mangle\hinge pyz\le\pi.\]
\end{subthm}

\end{thm}

\parit{Proof.}
Consider a point  $w\in \mathopen{]} p z \mathclose{[}$ close to $p$.
From \ref{SHORT.angle-b}, it follows that 
\[\mangle\hinge w x z+ \mangle\hinge w x{p}\le\pi\quad \text{and}\quad \mangle\hinge w y z + \mangle\hinge w y{p}\le\pi.\]

\begin{wrapfigure}{o}{30 mm}
\vskip-0mm
\centering
\includegraphics{mppics/pic-805}
\vskip4mm
\end{wrapfigure}

Since $\mangle\hinge w x y\le \mangle\hinge w x p +\mangle\hinge w y{p}$ (see \ref{claim:angle-3angle-inq}), we get 
\[\mangle\hinge w x z+ \mangle\hinge w y z +\mangle\hinge w x y
\le
2\cdot\pi.\]
Applying \ref{SHORT.angle-a}, 
\[\angk w x z
+ \angk w y z 
+\angk w x y
\le
2\cdot\pi.\]
Passing to the limits as $w\to p$, we have
\[\angk p x z 
+ \angk p y z 
+\angk p x y
\le
2\cdot\pi.\]
\qedsf

\section{Equivalent conditions}

The following theorem summarizes \ref{clm:angle-mono}, \ref{clm:angle-defined}, \ref{ex:adjacent-CBB}, and \ref{thm:angle-cbb}.

\begin{thm}{Theorem}\label{thm:defs_of_alex} 
Let $\spc{A}$ be a complete geodesic space.
Then the following conditions are equivalent.

\begin{subthm}{cbb}
$\spc{A}$ is $\Alex0$.
\end{subthm}
 

\begin{subthm}{2-sum} 
(adjacent angle comparison\index{comparison!adjacent angle comparison})
\[\angk z p x
+\angk z p y\le \pi\]
for any geodesic $[x y]$ and point $z\in \mathopen{]}x y\mathclose{[}$, $z\ne p$ in $\spc{A}$.
\end{subthm}

\begin{subthm}{point-on-side}
(\index{comparison!point-on-side comparison}point-on-side comparison)
\[\angk x p y\le\angk x p z\]
for any geodesic $[x y]$ and $z\in \mathopen{]}x y\mathclose{[}$ in $\spc{A}$.
\end{subthm}

\begin{subthm}{angle}(hinge comparison\index{comparison!hinge comparison})
\index{hinge!comparison}
the angle $\mangle\hinge x p y$ is defined for any hinge $\hinge x p y$ in $\spc{A}$.
Moreover, 
\[\mangle\hinge x p y\ge\angk x p y\]
for any hinge $\hinge x p y$, and
\[\mangle\hinge z p y + \mangle\hinge z p x\le\pi\]
for any adjacent hinges $\hinge z p y$ and $\hinge z p x$.
\end{subthm}

Moreover, the implications \ref{SHORT.cbb}$\Rightarrow$\ref{SHORT.2-sum}$\Rightarrow$\ref{SHORT.point-on-side}$\Rightarrow$\ref{SHORT.angle} hold in any space, not necessarily geodesic.
\end{thm}

\begin{thm}{Advanced Exercise}\label{ex:urysohn}
Construct a complete geodesic space $\spc{X}$ that is not $\Alex0$, but satisfies the following weaker version of the adjacent angle comparison \ref{2-sum}.

For any three points $p,x,y\in \spc{X}$ there is a geodesic $[x y]$ such that for any $z\in \left]x y\right[$
\[\angk{z}{p}{x}+\angk{z}{p}{y}
\le
\pi.\]
\end{thm}

\begin{thm}{Exercise}\label{ex:normCBB}
Let $\spc{W}$ be $\RR^2$ with the metric induced by a norm.
Show that if $\spc{W}$ is $\Alex0$, then $\spc{W}$ is isometric to the Euclidean plane $\EE^2$.
\end{thm}

\section{Function comparison}\label{Function comparison}

\parbf{Real-to-real functions.}
Choose $\lambda\in \RR$.
Let $s\:\II\to\RR$ be a locally Lipschitz function defined on an interval $\II$.
The following statement are equivalent;
if one (and therefore any) of them holds for $s$, then we say that $s$ is \index{$\lambda$-concave function}\emph{$\lambda$-concave}.
\begin{itemize}
\item We have inequality $s''\le \lambda$, where the second derivative $s''$ is understood in the sense of distributions.
\item The function $t\mapsto s(t)-\lambda\cdot\tfrac{t^2}2$ is concave.
\item The \index{Jensen inequality}\emph{Jensen inequality}
\[s(a\cdot t_0+(1-a)\cdot t_1)\ge a\cdot s(t_0)+(1-a)\cdot s(t_1)+\tfrac\lambda2\cdot a\cdot(1-a)\cdot(t_1-t_0)^2 \]
holds for any $t_0,t_1\in \II$ and $a\in[0,1]$.
\item for any $t_0\in \II$ there is a quadratic polynomial $\ell=\tfrac\lambda2\cdot t^2+a\cdot t+b$ (it is called a \index{barrier}\emph{barrier}) that supports (locally) $s$ at $t_0$ from above;
that is, $\ell(t_0)\z= s(t_0)$ and $\ell(t)\ge s(t)$ for any $t$ (in a neighborhood of $t_0$)
\end{itemize}

To prove equivalence, approximate $f$ by smooth functions taking a convolutions $f_n=f*k_n$ for a suitable sequence of kernels $k_n$.
Note that all the conditions are equivalent for $f_n$;
passing to the limit we get the same for $f$.

We will also use that \textit{$\lambda$-concave functions are one-sided differentiable}.

\parbf{Functions on metric spaces.}
A function on a metric space $\spc{A}$ will usually mean a \textit{locally Lipschitz real-valued function defined on an open subset of $\spc{A}$}.
The domain of a function $f$ will be denoted by $\Dom f$.

We say that $f$ is \index{$\lambda$-concave function}\emph{$\lambda$-concave} (briefly $f''\le \lambda$) if 
for any unit-speed geodesic $\gamma\:\II\z\to \Dom f$
the real-to-real function $t\mapsto f\circ\gamma(t)$ is $\lambda$-concave.

The following proposition is simple but conceptual ---
it reformulates a global geometric condition into an infinitesimal condition on distance functions.

\begin{thm}{Proposition}\label{comp-kappa}
A complete geodesic space $\spc{A}$ in $\Alex0$ if and only if $f''\le 1$ for any function $f$ of the form 
\[f\:x\mapsto \tfrac12\cdot\dist[2]{p}{x}{}.\] 
\end{thm} 

\parit{Proof.}
Choose a unit-speed geodesic $\gamma$ in $\spc{A}$ and two points $x=\gamma(t_0)$, $y=\gamma(t_1)$ for some $t_0<t_1$.
Consider the model triangle $\trig{\tilde p}{\tilde x}{\tilde y}\z=\modtrig(p x y)$.
Let $\tilde \gamma\:[t_0,t_1]\to\EE^2$ be the unit-speed parametrization of $[\tilde x \tilde y]$ from $\tilde x$ to $\tilde y$.

Set
\begin{align*} 
\tilde r(t)&\df\dist{\tilde p}{\tilde\gamma(t)}{},
& 
r(t)&\df\dist{p}{\gamma(t)}{}.
\end{align*}
Clearly, $\tilde r(t_0)=r(t_0)$ and $\tilde r(t_1)=r(t_1)$.
Note that the point-on-side comparison (\ref{point-on-side}) is equivalent to 
\[t_0\le t\le t_1
\qquad\Longrightarrow\qquad
\tilde r(t)\le r(t)
\eqlbl{eq:r=<r}\]
for any $\gamma$ and $t_0<t_1$.

Observe that Jensen's inequality for the function $h$ is equivalent to \ref{eq:r=<r}.
Hence the proposition follows.
\qeds

\section{Comments}

Our 4-point comparison in Section~\ref{sec:4-point} is closely related to the so-called $\CAT$ comparison, which defines \textit{upper} curvature bound in the sense of Alexandrov;
this is the subject of our previous invitation \cite{alexander-kapovitch-petrunin-2019}.

In both comparisons we check certain conditions on the 6 distances between every pair of points in 4-point sets.
Michael Gromov \cite[Section 1.19$_+$]{gromov1999} suggested considering other conditions of that type for $n$-point subsets;
see \cite{toyoda,lebedeva-petrunin-zolotov,lebedeva2019,petrunin2017,lebedeva-petrunin2024,lebedeva-petrunin2023,lebedeva-petrunin2021,lebedeva-petrunin2025,eskenazis-mendel-naor,gromov2001} for the development of this idea.

We have chosen complete \textit{geodesic} spaces with curvature at least $\kappa$ as the main object of study (the $\Alex\kappa$ spaces).
Instead of the \textit{geodesic} condition, we could assume that they are \textit{length} spaces. 
This option is more natural and general, but many statements can be reduced to the geodesic case.
In particular, suppose $\spc{A}$ is a complete length space with curvature $\ge \kappa$,
then 
\textit{$\spc{A}$ can be isometrically embedded into an $\Alex\kappa$ space} --- the ultrapower of $\spc{A}$; see \cite[4.11+8.4]{alexander-kapovitch-petrunin2024}.
Also, by Plaut's theorem, any point $p$ in $\spc{A}$ can be connected by geodesics to \textit{most} of points in $\spc{A}$
\cite[8.11]{alexander-kapovitch-petrunin2024}; compare to \ref{ex:grad-dist:geod}.

All the discussed statements admit natural generalizations to 
spaces with curvature $\ge \kappa$ in the sense of Alexandrov.
The proof are nearly the same, but the formulas are getting more complicated.

For example, the function comparison for $\Alex{-1}$ spaces states that 
$f''\z\le f$ for any function of the type $f=\cosh\circ\distfun_p$.
(The inequality used here will be defined in Section \ref{sec:Semiconcave functions}.)

Similarly, the function comparison for $\Alex1$ states that for any point $p$, we have
$f''\le -f$ for the function $f=-\cos\circ\distfun_p$
defined in $\oBall(p,\pi)$.
The geometric meaning of these inequalities remains the same:
\textit{distance functions are more concave than distance functions in $\MM^2(\kappa)$}.

%done:\footnote{\red V: perhaps say something about CAT spaces here?}
