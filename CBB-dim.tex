\chapter{Limit spaces}\label{chap:lim}

\section{Gromov--Hausdorff convergence}

In this section, we cook up a metric space out of all compact metric spaces.
More precisely, we want to define the so-called  Gromov--Hausdorff metric on the set of \textit{isometry classes} of compact metric spaces.
(Being isometric is an equivalence relation, 
and an \index{isometry class}\emph{isometry class} is an equivalence class with respect to this relation.)

The obtained metric space will be denoted by $\GH$.
Given two metric spaces $\spc{X}$ and $\spc{Y}$,
denote by $[\spc{X}]$ and $[\spc{Y}]$ their isometry classes;
that is, $\spc{X}'\in [\spc{X}]$ if and only if $\spc{X}'\iso \spc{X}$.
Pedantically, the Gromov--Hausdorff distance from $[\spc{X}]$ 
to $[\spc{Y}]$ should be denoted as $|[\spc{X}]-[\spc{Y}]|_{\GH}$;
but we will write it as $|\spc{X}\z-\spc{Y}|_{\GH}$ and say (not quite correctly) that 
\textit{$|\spc{X}\z-\spc{Y}|_{\GH}$ is the Gromov--Hausdorff distance from  $\spc{X}$ 
to  $\spc{Y}$}.
In other words, from now on the term \textit{metric space} might also stand for its \textit{isometry class}.

The metric on $\GH$ is defined as the maximal metric such that \textit{the distance between subspaces in a metric space is not greater than the Hausdorff distance between them}.
Here is a formal definition:

\begin{thm}{Definition}\label{def:GH}
The \index{Gromov--Hausdorff distance}\emph{Gromov--Hausdorff distance} $|\spc{X}-\spc{Y}|_{\GH}$ between compact metric spaces $\spc{X}$ and $\spc{Y}$
is defined by the following
relation.
 
Given  $r > 0$, we have that $|\spc{X}-\spc{Y}|_{\GH} < r$ if and only if there exists a metric
space $\spc{W}$ and subspaces $\spc{X}'$ and $\spc{Y}'$ in $\spc{W}$ that are isometric to $\spc{X}$ and $\spc{Y}$
respectively such that $|\spc{X}'-\spc{Y}'|_{\Haus\spc{W}} < r$. 
(Here $|\spc{X}'-\spc{Y}'|_{\Haus\spc{W}}$ denotes the Hausdorff distance between sets $\spc{X}'$ and $\spc{Y}'$ in $\spc{W}$.)
\end{thm}

\begin{thm}{Theorem}\label{thm:GH-is-a-metric}
The set of isometry classes of compact metric spaces equipped with Gromov--Hausdorff metric forms a metric space (which is denoted by $\GH$).

In other words, for arbitrary compact metric spaces $\spc{X}$, $\spc{Y}$, and $\spc{Z}$ the following conditions hold

\begin{subthm}{GH-1} $|\spc{X}-\spc{Y}|_{\GH}\ge 0$;
\end{subthm}

\begin{subthm}{GH-2} $|\spc{X}-\spc{Y}|_{\GH}=0$ if and only if $\spc{X}$ is isometric to $\spc{Y}$;
\end{subthm}

\begin{subthm}{GH-3} $|\spc{X}-\spc{Y}|_{\GH}=|\spc{Y}-\spc{X}|_{\GH}$;
\end{subthm}

\begin{subthm}{GH-4} $|\spc{X}-\spc{Y}|_{\GH}+|\spc{Y}-\spc{Z}|_{\GH}\ge |\spc{X}-\spc{Z}|_{\GH}$.
\end{subthm}
\end{thm}

Note that \ref{SHORT.GH-1}, \ref{SHORT.GH-3},
and the if part of \ref{SHORT.GH-2} follow directly from \ref{def:GH}.
Parts \ref{SHORT.GH-4} and the only-if part of \ref{SHORT.GH-2} are not hard but require some work.
Complete proofs of these and the following statement  are given in \cite[Lecture 5
]{petrunin2023pure}.

\begin{thm}{Lemma}\label{lem:GH-complete}
The space $\GH$ is complete.
\end{thm}

The Gromov--Hausdorff metric defines Gromov--Hausdorff \index{Gromov--Hausdorff convergence}\emph{convergence}.
Namely, a sequence of compact metric spaces $\spc{X}_n$ converges to compact metric spaces $\spc{X}_\infty$ in the sense of Gromov--Hausdorff if 
\[\dist{\spc{X}_n}{\spc{X}_\infty}{\GH}\to 0\quad\text{as}\quad n\to\infty.\]

This convergence is more important than the metric ---
in all applications, we use only the topology on $\GH$
and we do not care about the particular value of the Gromov--Hausdorff distance between spaces.

\begin{thm}{Exercise}\label{ex:geod-closed}
Show that geodesic spaces form a closed subset in~$\GH$.
\end{thm}

+ ??? noncomact case + hausdorff approximations.

\begin{thm}{Exercise}\label{ex:GHto-tangent}
Let $p$ be a point in a finite-dimensional complete geodesic $\CBB(\kappa)$ space $\spc{L}$.
Show that $(\lambda\cdot \spc{L},p)\to (\T_p,0)$ in the sense of pointed Gromov--Hausdorff convergence.
\end{thm}

\section{Survival of curvature bounds}

\begin{thm}{Theorem}\label{thm:CBB-closed}
For any $\kappa\in\RR$, the $\CBB(\kappa)$ spaces form a closed subset in $\GH$.
\end{thm}

\parit{Proof}.
Suppose $\spc{X}_n\to\spc{X}_\infty$ in the sense of Gromov--Hausdorff.
Choose a quadruple of points $p_\infty, x_\infty,y_\infty,z_\infty\in \spc{X}_\infty$.

By the definition of Gromov--Hausdorff convergence, we can choose a quadruple $p_n$,  $x_n$, $y_n$, $z_n\in \spc{X}_n$ such that each of 6 distances between pairs of $p_n$, $x_n$, $y_n$, $z_n$ converge to the distance between the corresponding pairs of $p_\infty, x_\infty,y_\infty,z_\infty$.

By the assumption, $\CBB(\kappa)$ comparison holds for each $p_n$, $x_n$, $y_n$, $z_n$.
Passing to the limit, we get the $\CBB(\kappa)$ comparison for $p_\infty$,  $x_\infty$, $y_\infty$, $z_\infty$.
\qeds

\begin{thm}{Exercise}\label{ex:dim-lim}
Suppose that a sequence $\spc{L}_1,\spc{L}_2,\dots$ of compact geodesic $\CBB(0)$ space converges to $\spc{L}_\infty$.
Show that
\[\LinDim \spc{L}_\infty\le \liminf_{n\to\infty} \LinDim \spc{L}_n.\]
\end{thm}


\section{Volume}

Fix a positive integer $m$.
The $m$-dimensional Hausdorff measure of a Borel set $B$ in a metric space will be called its \index{volume}\emph{$m$-volume}; it will be denoted by $\vol_m B$.
We assume that the Hausdorff measure is calibrated so that the unit cube in $\EE^m$ has unit volume.

This definition will be used mostly in $m$-dimensional complete geodesic $\CBB(\kappa)$ spaces.
In this case, we may write $\vol B$ instead of $\vol_m B$.


\begin{thm}{Bishop--Gromov inequality}\label{inq:BG}
Let $\spc{L}$ be a complete geodesic $\CBB(0)$ space.
Suppose $\spc{L}=m<\infty$.
Then 
\[\vol \oBall(p,R)\le \omega_m\cdot R^m,\]
where $\omega_m$ denotes the volume of the unit ball in $\EE^m$.
Moreover, the function 
\[R\mapsto \frac{\vol B(p,R)}{R^m}\]
is nonincreasing.
\end{thm}

\parit{Proof.}
Given $x\in\spc{L}$ choose a geodesic path $\gamma_x$ from $p$ to $x$.
Let $\log_p\:\spc{L}\to \T_p$ be defined by $\log_p\:x\mapsto \gamma_x^+(0)$.
By comparison, $\log_p$ is distance-noncontracting.
Note that $\log_p$ maps $\oBall(p,R)_{\spc{L}}$ to $\oBall(0,R)_{\T_p}$.

If $\T_p\iso \EE^m$, then $\vol\oBall(0,R)_{\T_p}=\omega_m\cdot R^m$,
and the first statement follows.
Otherwise, by \ref{ex:tangent=Em}, we can find a point $p'$ arbitrarily close to $p$ such that $\T_{p'}\iso \EE^m$.
If $\eps>\dist{p}{p'}{}$, then $\oBall(p,R)\subset \oBall(p',R+\eps)$.
Therefore,
\[\vol \oBall(p,R)\le \omega_m\cdot (R+\eps)^m\]
for any $\eps>0$.
Hence the first statement follows in the general case.

For the second statement, choose $0<R_1<R_2$.
Consider the map $w\: \spc{L}\to \spc{L}$ defined by $w\:x\mapsto \gamma_x(\tfrac {R_1}{R_2})$.
By comparison,
\[\dist{w(x)}{w(y)}{}\ge \tfrac {R_1}{R_2}\cdot \dist{x}{y}{}.\]
It follows that 
\[\vol B\ge (\tfrac {R_1}{R_2})^m\cdot\vol A\]
if $B\supset w(A)$.
Observe that 
\[\oBall(p,R_1) \supset w[\oBall(p,R_2)]\]
--- hence the result.
\qeds

\begin{thm}{Exercise}\label{ex:BG}
Let 
\end{thm}


\begin{thm}{Exercise}\label{ex:diam-compact}
Given a positive integer $m$, 
show that any complete geodesic $m$-dimensional $\CBB(0)$ space with bounded diameter is compact.
\end{thm}

\section{Gromov's selection theorem}

\begin{thm}{Theorem}\label{thm:gromov-compactness}
The set of complete geodesic $m$-dimensional $\CBB(\kappa)$ spaces with diameter $\le D$ forms a compact subset in $\GH$;
here we assume that $m$ is finite.
\end{thm}

The theorem implies that one can select a converging sequence 
from any sequence of spaces from the described set.


Let $X$ be a subset of a metric space $\spc{W}$.
Recall that a set $Z\subset \spc{W}$ is called \emph{$\eps$-net} of $X$ if for any point $x\in X$, there is a point $z\in Z$ such that $\dist{x}{z}{}<\eps$.

We will use the following characterization of compact sets: \textit{a closed subset $X$ of a complete metric space is compact if and only if $X$ admits a finite $\eps$-net for any $\eps>0$}.
The following statement is slightly more general.

\begin{thm}{Claim}\label{clm:compact-net}
A closed subset $X$ of a complete metric space is compact if and only if it admits a compact $\eps$-net for any $\eps>0$.
\end{thm}

\parit{Proof.}
Let $Z$ be a compact $\eps$-net of $X$.
Since $Z$ is compact, it admits a finite $\eps$-net $F$.
Note that $F$ is a $2\cdot\eps$-net of $X$.
Since $\eps>0$ is arbitrary, we get the result.
\qeds

Let $\pack_\eps\spc{X}$ be the exact upper bound on the number of points $x_1,\z\dots,x_n\in \spc{X}$ such that $\dist{x_i}{x_j}{}\ge\eps$ if $i\ne j$.

If $n=\pack_\eps\spc{X}<\infty$, then
the collection of points $x_1,\dots,x_n$ is called a \index{maximal packing}\emph{maximal $\eps$-packing}.

\begin{thm}{Exercise}\label{ex:pack-net}
Show that any maximal $\eps$-packing $x_1,\dots,x_n$ is an \emph{$\eps$-net}.
Conclude that a complete metric space $\spc{X}$ is compact if and only if $\pack_\eps\spc{X}\z<\infty$ for any $\eps>0$.
\end{thm}


\parit{Proof of \ref{thm:gromov-compactness}.}
Denote by $\bm{K}$ the set of isometry classes of  complete geodesic $\CBB(0)$ spaces  with dimension $\le m$ and diameter $\le D$.
By \ref{thm:CBB-closed}, \ref{ex:geod-closed}, and \ref{ex:resporka}, $\bm{K}$ is a closed subset of $\GH$.

Choose a space $\spc{L}\in \bm{K}$;
suppose $x_1,\dots,x_n\in \spc{L}$ is a collection of points such that $\dist{x_i}{x_j}{}\ge \eps$ for all $i\ne j$.
Note that the balls $B_i=\oBall(x_i,\tfrac\eps2)$ do not overlap.

By Bishop--Gromov inequality, we get 
\[\vol B_i\ge (\tfrac\eps{2\cdot D})^m\cdot\vol \spc{L}\]
for any $i$ and any small $\eps>0$.
It follows that $n\le (\tfrac{2\cdot D}\eps)^m$;
that is, 
\[\pack_\eps\spc{L}\le  N(\eps)\df(\tfrac{2\cdot D}\eps)^m\]
for all small $\eps>0$.

Choose a maximal $\eps$-packing $x_1,\z\dots,x_n\in \spc{L}$.
By \ref{ex:pack-net}, $\spc{F}_\eps\z\df\{x_1,\z\dots,x_n\}$ is an $\eps$-net of $\spc{L}$.
Observe that $\dist{\spc{F}_\eps}{\spc{L}}{\GH}\le \eps$.
Further, note that the set $\bm{F}_\eps$ of finite metric spaces with diameter $\le D$ and at most $N(\eps)$ points forms a compact subset in $\GH$.

Summarizing, for any $\eps>0$ we can find a compact $\eps$-net $\bm{F}_\eps\subset \GH$ of $\bm{K}$.
It remains to apply \ref{lem:GH-complete} and \ref{clm:compact-net}.
\qeds

\begin{thm}{Exercise}\label{ex:pack-vol}
Let $\spc{L}$ be complete geodesic $\CBB(0)$ spaces with dimension $m$ and diameter $\le D$.
Suppose $\vol\spc{L}\ge v_0>0$.
Show that 
\[\pack_\eps\spc{L}\ge \frac\Const{\eps^m}\]
for some constant $\Const=\Const(m,D,v_0)>0$.

Conclude that if $\spc{L}_n$ is a sequence of complete geodesic $m$-dimensional $\CBB(0)$ spaces with diameter $\le D$ and volume $\ge v_0$, then its Gromov--Hausdorff limit $\spc{L}_\infty$ (if it is defined) has linear dimension~$m$.%
\footnote{A stronger statement holds 
\[\vol_m\spc{L}_\infty=\lim_{n\to\infty} \vol_m\spc{L}_n;\]
in other words, if $\bm{K}\subset \GH$ denotes the set of isometry classes of all compact geodesic $\CBB(\kappa)$ spaces with dimension $\le m$, then the function
$\vol_m\:\bm{K}\to \RR$ is continuous.}
\end{thm}

\section{Comments}

Let us state a version of Bishop--Gromov inequality for curvature bound $\kappa=\pm1$.
Its proof is more technical.
A weaker inequality can be obtained by applying the same argument as above,
and it is sufficient to extend the rest of the result in the lecture.

\begin{thm}{Bishop--Gromov inequality}
Given a point $p$ in a complete geodesic $m$-dimensional $\CBB(\pm1)$ space consider the function $v(R)\z=\vol_m\oBall(p,R)$;
denote by $\tilde v(R)$ the volume of $R$ ball in the corresponding $m$-dimensional model space (the unit $m$-dimensional sphere or the $m$-dimensional Lobachevsky space).
Then 
\[v(R)\le \tilde v(R)\]
and the function 
\[R\mapsto \frac{v(R)}{\tilde v(R)}\] is nonincreasing;
in the $\CBB(1)$ case, one has to assume that $R<\pi$.
\end{thm}

The same inequality holds for complete $m$-dimensional Riemannian manifolds with Ricci curvature $\ge (m-1)\cdot \kappa$.

Gromov's selection theorem is the main source of applications of $\CBB$ spaces.
The homotopy-type finiteness theorem (\ref{thm:h-finiteness}) in the next lecture illustrates this technique.

A version Gromov's selection theorem (as well as Bishop--Gromov inequality) holds for $m$-dimensional Riemannian manifolds with a lower bound on Ricci curvature.
It motivates the study of the so-called $\mathrm{CD}(K,m)$ spaces; $\mathrm{CD}$ stands for curvature-dimension condition.
This theory has serious applications in Alexandrov geometry;
in particular, it provides a version of Liouville theorem about phase-space volume of geodesic flow in Alexandrov space \cite{brue-mondino-semola}.
